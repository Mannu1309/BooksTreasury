{% extends 'base.html' %}

{% block title %}Search Result for {{search}}{% endblock title %}

{% block body %}

<style>
    .image-thumbail{
        height: 300px;
        object-fit: contain;
    }
    #cimg{
      object-fit: cover;
    }
  
</style>

<i><h2 style=" margin-top: 5%; margin-bottom: 5%; text-align:center;"><strong>Book(s) available in the category of "{{search}}" are :</strong></h2></i>

<div class="container position-absolute" style="margin-left: 3%;">
    <div class="row">
        
        <div class="col-md-2 ">
            <form method="GET" action="{% url 'search_result' %}">
                <div class="row">
                <h3 class="is-size-5" style="font-family:product-sans;"><strong>Price Range</strong></h3>

                <div class="field" style="margin-top: 2%;">
                    <label>From</label>
                    <div class="control">
                        <input type="number" class="form-control" name="price_from" class="input" value="{{price_from}}">
                    </div>
                </div>

                <div class="field" style="margin-top: 5%;">
                    <label>To</label>
                    <div class="control">
                        <input type="number" class="form-control" name="price_to" class="input" value="{{price_to}}">
                    </div>
                </div>
                </div>

                <div class="column" style="margin-top: 17%;">
                    <h3 class="is-size-5" style="font-family:product-sans;"><strong>Sorting</strong></h3>

                    <div class="field" style="margin-top: 6%;">
                        <label><i>Select sorting criteria</i></label>

                        <div class="control" style="margin-top: 3%;">
                            <div class="select">
                                <select name="sorting" class="form-select">
                                    <option value="-date" {% if sorting == '-date' %} selected{% endif %}>Newest First</option>
                                    <option value="price" {% if sorting == 'price' %} selected{% endif %}>Price : Low to High</option>
                                    <option value="-price" {% if sorting == '-price' %} selected{% endif %}>Price : High to Low</option>
                                </select>
                            </div>
                        </div>
                    </div>

                </div>
                <button class="btn btn-success" type="submit" style="margin-top: 20%;">Filter</button>
            </form>

        </div>

        <div class="col-md-10">

            <div class="container"  style="justify-content: center;">


        

                {% for book in books %}
                <div class="row" style="margin-bottom: 7%; margin-left: 9%;">

                    <div class="col-md-4" >

                        <div class="card" style="width: 193px;" >
                            <img class="image-thumbail" src="{{book.image.url}}" alt="Card image cap">
                
                        </div>


                    </div>

                    <div class="col-md-8" style="justify-content: center;">

                        <h3 style="margin-top: 5%; margin-bottom: 1%;">{{book.name}}</h3>
                        <i>by {{book.author}}</i>
                        <h6 style="margin-top: 2%; margin-bottom: 2%;">Price : Rs. {{book.price}}</h6>
                        <!--<p>{{book.description}}</p>-->
                        {% if user.is_authenticated %}
                            <button data-product={{book.id}} data-action="add" class="btn btn-outline-success btn-sm m-1 add-btn update-cart">Add to Cart</button>
                            <a href="{% url 'book' book.id %}" class="btn btn-outline-dark btn-sm m-1">View</a>
                        {% else %}
                            <button data-product={{book.id}} data-action="add" class="btn btn-outline-primary btn-sm m-1 add-btn update-cart" disabled>Add to Cart</button>
                            <a href="{% url 'book' book.id %}" class="btn btn-outline-dark btn-sm m-1">View</a>
                        {% endif %}
                    </div>

                </div>
        
                {% empty %}
                {% if search %}
                    <h3 class="my-3" style="color:rgb(226, 63, 63) ; margin-left: 25%;">No Book(s) available with {{search}}!!!</h3>
                {% else %}
                <h3 class="my-3" style="color:rgb(226, 63, 63) ; margin-left: 22%;">You have to provide some input to filter!</h3>
                {% endif %}    
                {% endfor %}



            </div>

        </div>  
    </div>
</div>



{% endblock body %}